---
layout: post
title: OkHttp
author: sleticalboy
date: 2019-07-08 10:02:56
category: open-source
tags: [open-source]
---

# OkHttp

## 核心

### Request
* methods: get, post, put, delete, patch, head 
* HttpUrl: schema, host, port, url, queryNamesAndValues
* Headers: namesAndValues
* RequestBody
    - MediaType
        + mediaType
        + type: text, image, audio, video, application, <del>extension-token</del>
        + subtype: plain/xml/html/css, png/jepg/gif, mp3/wav, avi/x-mepg/mpeg4, octet-stream/pdf/vnd.android.package-archive
        + charset
    - contentLength
    - MultipartRequestBody
        + boundary: BeteString
        + contentType/mediaType
        + partHeaders: List<Headers>
        + partBodies: List<RequestBody>
        + MultipartBuilder
            - mixed: multipart/mixed
            - alternative: multipart/alternative
            - digest: multipart/digest
            - parallel: multipart/parallel
            - form: multipart/form-data
* CacheControl
    - force_network: 无缓存, 每次从网络获取
    - force_cache: 强制缓存
    - no-cache, no-store, max-age, s-maxage, private, public, must-revalidate, mxa-stale, min-refresh, only-if-cached, on-transform
* javaNetUrl
* javaNetUri
---

### Response 
---

### 拦截器（责任链）
- RealInterceptorChain 
- 用户自定义
- RetryAndFollowUpInterceptor()
  - 处理重试和重定向
- BridgeInterceptor
  - 将用户请求加工成网络请求（添加一些请求头）
- CacheInterceptor
  - 缓存层
- ConnectInterceptor
  - 发起连接
- networkIntercepters
- CallServerInterceptor
  - 请求 server

---
### Chain 链
* request() request
* proceed() 继续向下走
* connection() 连接 
---

## 辅助

### EventListener
- 贯穿整个网络请求过程
